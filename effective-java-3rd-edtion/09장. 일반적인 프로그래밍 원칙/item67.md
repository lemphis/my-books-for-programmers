# 67. 최적화는 신중히 하라

최적화는 좋은 결과보다는 해로운 결과로 이어지기 쉽고, 섣불리 진행하면 특히 더 그렇다.  
빠르지도 않고 제대로 동작하지도 않으면서 수정하기는 어려운 소프트웨어를 탄생시키는 것이다.

성능 때문에 견고한 구조를 희생하지 말자.  
**빠른 프로그램보다는 좋은 프로그램을 작성하라.**  
좋은 프로그램이지만 원하는 성능이 나오지 않는다면 그 아키텍처 자체가 최적화할 수 있는 길을 안내해줄 것이다.  
좋은 프로그램은 정보 은닉 원칙을 따르므로 개별 구성요소의 내부를 독립적으로 설계할 수 있다.

**성능을 제한하는 설계를 피하라.**  
완성 후 변경하기가 가장 어려운 설계 요소는 바로 컴포넌트끼리, 혹은 외부 시스템과의 소통 방식이다.

**API를 설계할 때 성능에 주는 영향을 고려하라.**  
public 타입을 가변으로 만들면, 즉 내부 데이터를 변경할 수 있게 만들면 불필요한 방어적 복사를 수없이 유발할 수 있다.

빠른 프로그램을 작성하려 안달하지 말자.  
좋은 프로그램을 작성하다 보면 성능은 따라오게 마련이다.  
시스템 구현을 완료했다면 이제 성능을 측정해보라.  
충분히 빠르면 그거로 끝이고, 그렇지 않다면 프로파일러를 사용해 문제의 원인이 되는 지점을 찾아 최적화를 수행하자.
