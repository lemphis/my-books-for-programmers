# 26. 로 타입은 사용하지 말라

클래스와 인터페이스 선언에 타입 매개변수(type parameter)가 쓰이면, 이를 `제네릭 클래스` 또는 `제네릭 인터페이스`라고 한다.  
제네릭 클래스와 제네릭 인터페이스를 통틀어 제네릭 타입(generic type)이라고 한다.

각각의 제네릭 타입은 일련의 매개변수화 타입(parameterized type)을 정의한다.  
제네릭 타입을 하나 정의하면 그에 딸린 로 타입(raw type)도 함께 정의된다. 로 타입이란 제네릭 타입에서 타입 매개변수를 전혀 사용하지 않을 때를 말한다.  
로 타입은 타입 선언에서 제네릭 타입 정보가 전부 지워진 것처럼 동작하는데, 제네릭이 도래하기 전 코드와 호환되도록 하기 위한 궁여지책이라 할 수 있다.  
로 타입을 쓰는 걸 언어 차원에서 막아 놓지는 않았지만 절대로 써서는 안 된다. 로 타입을 쓰면 제네릭이 안겨주는 안전성과 표현력을 모두 잃게 된다.

원소의 타입을 몰라도 되는 제네릭 타입이 필요한 경우에는 비한정적 와일드카드 타입('?')을 사용하면 된다.  
로 타입 컬렉션에는 아무 원소나 넣을 수 있어서 타입 불변식을 훼손하기 쉽지만 비한정적 와일드카드 타입은 null 외에는 어떠한 원소도 넣을 수 없게 하여 타입 불변식 훼손을 막았다.

로 타입을 쓰지 말라는 규칙에도 소소한 예외가 몇 개 있다.

1. class 리터럴

   - 자바 명세는 class 리터럴에 매개변수화 타입을 사용하지 못하게 했다. (배열과 기본 타입은 허용한다)

2. instanceof
   - 런타임에는 제네릭 타입이 지워지므로 instanceof 연산자는 비한정적 와일드카드 타입('?') 이외의 매개변수화 타입에는 적용할 수 없다.
   - 로 타입이든 비한정적 와일드카드 타입이든 instanceof는 완전히 똑같이 동작한다.
   - 비한정적 와일드카드 타입의 꺾쇠괄호와 물음표는 아무런 역할 없이 코드만 지저분하게 만드므로 차라리 로 타입을 쓰는 편이 깔끔하다.
   - ```java
     if (o instanceof Set) {
        Set<?> s = (Set<?>) o;
        ...
     }
     ```
