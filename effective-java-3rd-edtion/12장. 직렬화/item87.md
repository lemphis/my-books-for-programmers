# 87. 커스텀 직렬화 형태를 고려해보라

**먼저 고민해 보고 괜찮다고 판단될 때만 기본 직렬화 형태를 사용하라.**  
**객체의 물리적 표현화 논리적 내용이 같다면 기본 직렬화 형태라도 무방하다.**
객체의 물리적 표현과 논리적 표현의 차이가 클 때 기본 직렬화 형태를 사용하면 크게 네 가지 면에서 문제가 생긴다.

- 공개 API가 현재의 내부 표현 방식에 영구히 묶임
- 너무 많은 공간을 차지할 수 있음
- 시간이 너무 많이 걸릴 수 있음
- 스택 오버플로를 일으킬 수 있음

객체의 전체 상태를 읽는 메서드에 적용해야 하는 동기화 메커니즘을 직렬화에도 적용해야 한다.

한번 공개된 메서드는 향후 릴리스에서 제거할 수 없듯이, 직렬화 형태에 포함된 필드도 마음대로 제거할 수 없다.  
직렬화 호환성을 유지하기 위해 영원히 지원해야 하는 것이다.  
잘못된 직렬화 형태를 선택하면 해당 클래스의 복잡성과 성능에 영구히 부정적인 영향을 남긴다.
