# 2.3 서버 설정

MySQL 서버는 단 하나의 설정 파일만 사용한다.  
리눅스를 포함한 유닉스 계열에서는 my.cnf라는 이름을 사용하고 윈도우 계열에서는 my.ini라는 이름을 사용하며 이 파일의 이름은 변경할 수 없다.  
MySQL 서버는 시작될 때만 이 설정 파일을 참조하는데, 이 설정 파일의 경로가 딱 하나로 고정된 것은 아니다.  
MySQL 서버는 지정된 여러 개의 디렉터리를 순차적으로 탐색하면서 처음 발견된 설정 파일을 사용하게 된다.

## 2.3.1 설정 파일의 구성

MySQL 설정 파일은 하나의 my.cnf나 my.ini 파일에 여러 개의 설정 그룹을 담을 수 있으며, 대체로 바이너리 프로그램 이름을 그룹명으로 사용한다.  
설정 파일에 있는 client라는 그룹은 MySQL 서버(mysqld나 mysqld_safe)를 제외한 대부분의 클라이언트 프로그램이 공유하는 영역이다.  
MySQL 클라이언트(mysql) 프로그램이나 MySQL 백업 프로그램인 mysqldump 프로그램 등은 모두 클라이언트 프로그램의 분류에 속하기 때문에 client 설정 그룹을 공유하며 동시에 각각 자기 자신의 그룹도 함께 읽어서 사용한다.  
mysqld_safe라는 프로그램은 MySQL 서버가 비정상적으로 종료됐을 때 재시작하는 일만 하는 프로세스이므로 일반적으로 mysqld_safe 설정 그룹은 잘 사용되지 않는다.  
하지만 MySQL 서버의 타임존을 설정하거나 할 때는 mysqld_safe 설정 그룹을 꼭 이용해야 한다.

## 2.3.2 MySQL 시스템 변수의 특징

MySQL 서버는 기동하면서 설정 파일의 내용을 읽어 메모리나 작동 방식을 초기화하고, 접속된 사용자를 제어하기 위해 이러한 값을 별도로 저장해 둔다.  
MySQL 서버에서는 이렇게 저장된 값을 시스템 변수라고 한다.  
각 시스템 변수에는 "SHOW VARIABLES" 또는 "SHOW GLOBAL VARIABLES"라는 명령으로 확인할 수 있다.

## 2.3.3 글로벌 변수와 세션 변수

MySQL의 시스템 변수는 적용 범위에 따라 글로벌 변수와 세션 변수로 나뉘며, 때로는 동일한 변수 이름이 글로벌 변수뿐 아니라 세션 변수에도 존재할 때가 있다.

- 글로벌 변수
  - 하나의 MySQL 서버 인스턴스에서 전체적으로 영향을 미치는 시스템 변수
  - 주로 MySQL 서버 자체에 관련된 설정일 때가 많음
  - 대표적으로 MySQL 서버에서 단 하나만 존재하는 MyISAM의 키 캐시 크기, InnoDB의 버퍼 풀 크기 등이 있음
- 세션 변수
  - 클라이언트의 필요에 따라 개별 커넥션 단위로 다른 값으로 변경할 수 있는 시스템 변수
  - MySQL 클라이언트가 MySQL 서버에 접속할 때 기본적으로 부여하는 옵션의 기본값을 제어하는 데 사용
  - 한번 연결된 커넥션의 세션 변수는 서버에서 강제로 변경할 수 없음
  - 대표적으로 클라이언트에서 쿼리 단위로 자동 커밋을 수행할지 여부를 결정하는 AutoCommit 변수가 있음
- Both
  - 세션 범위의 시스템 변수 가운데 MySQL 서버의 설정 파일에 명시해 초기화할 수 있는 시스템 변수
  - MySQL 서버가 설정 파일을 읽어 기억만 하고 있다가 실제 클라이언트와의 커넥션이 생성되는 순간에 해당 커넥션의 기본값으로 설정

## 2.3.4 동적 변수와 정적 변수

MySQL 서버의 시스템 변수는 MySQL 서버가 기동 중인 상태에서 변경 가능한지에 따라 동적 변수와 정적 변수로 구분된다.  
디스크에 저장된 설정 파일의 내용은 변경하더라도 MySQL 서버가 재시작하기 전에는 적용되지 않는다.  
하지만 SHOW 명령으로 MySQL 서버에 적용된 변숫값을 확인하거나 SET 명령을 이용해 값을 바꿀 수도 있다.  
SET 명령을 통해 변경되는 시스템 변숫값이 MySQL의 설정 파일에 반영되는 것은 아니기 때문에 현재 기동 중인 MySQL의 인스턴스에서만 유효하다.  
SHOW나 SET 명령에서 GLOBAL 키워드를 사용하면 글로벌 시스템 변수의 목록과 내용을 읽고 변경할 수 있으며, GLOBAL 키워드를 빼면 세션 변수를 조회하고 변경한다.
