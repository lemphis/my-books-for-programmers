# 7.1 쿼리와 연관된 시스템 설정

대소문자 구분, 문자열 표기 방법 등과 같은 SQL 작성 규칙은 MySQL 서버의 시스템 설정에 따라 달라진다.

## 7.1.1 SQL 모드

MySQL 서버의 sql_mode라는 시스템 설정에서는 여러 개의 값이 동시에 설정될 수 있다.  
MySQL 서버의 설정 파일에서 sql_mode를 설정할 때는 구분자(,)를 이용해 다음에 설명되는 키워드를 동시에 설정할 수 있다.

- STRICT_ALL_TABLES
  - 일반적으로 MySQL에서는 저장하려는 값의 길이가 칼럼의 길이보다 더 긴 경우라 하더라도 에러가 발생하지 않음 (초과하는 부분은 버림)
  - 이 설정을 추가하면 칼럼의 정해진 길이보다 큰 값을 저장할 때 경고가 아닌 오류가 발생하며 쿼리 실행 중지
- STRICT_TRANS_TABLES
  - MySQL 서버는 칼럼의 타입과 호환되지 않는 값을 저장하려고 할 때, 비슷한 값으로 최대한 바꿔서 저장하려고 함
  - 이 설정을 추가하면 원하지 않는 데이터 타입의 변환이 필요할 때 MySQL 서버는 강제 변환하지 않고 에러를 발생시킴
- TRADITIONAL
  - STRICT_ALL_TABLES, STRICT_TRANS_TABLES와 비슷하지만 조금 더 엄격한 방법으로 SQL의 작동을 제어
  - MySQL 서버가 조금 더 ANSI 표준 모드로 작동하도록 유도함
- ANSI_QUOTES
  - MySQL에서는 문자열 값(리터럴)을 표현하기 위해 홑따옴표와 쌍따옴표 동시 사용 가능
  - 이 설정을 추가하면 홑따옴표만 문자열 값 표기로 사용할 수 있고, 쌍따옴표는 칼럼명이나 테이블명과 같은 식별자(Identifier)를 표기하는 데만 사용 가능
- ONLY_FULL_GROUP_BY
  - MySQL의 쿼리에서는 GROUP BY 절에 포함되지 않은 칼럼이더라도 집합 함수의 사용 없이 그대로 SELECT 절이나 HAVING 절에 사용 가능
  - 이 설정을 추가하면 SQL 문법에 조금 더 엄격한 규칙 적용 가능
- PIPE_AS_CONCAT
  - MySQL에서 "||"는 OR 연산자와 같은 의미로 사용됨
  - 이 설정을 추가하면 오라클과 같이 문자열 연결(CONCAT) 연산자로 사용 가능
- PAD_CHAR_TO_FULL_LENGTH
  - MySQL에서는 CHAR 타입이라 하더라도 VARCHAR와 같이 유효 문자열 뒤의 공백 문자는 제거되어 반환됨
  - 이 설정을 추가하면 CHAR 타입의 칼럼 값을 가져오는 경우, 뒤쪽의 공백이 제거되지 않고 반환됨
- NO_BACHSLASH_ESCAPES
  - MySQL에서도 일반적인 프로그래밍 언어에서처럼 역 슬래시 문자를 이스케이프 문자로 사용 가능
  - 이 설정을 추가하면 역 슬래시를 문자의 이스케이프 용도로 사용하지 못하게 함 (다른 문자와 동일하게 취급)
- IGNORE_SPACE
  - MySQL에서 스토어드 프로시저나 함수의 이름 뒤에 공백이 있으면 "스토어드 프로시저나 함수가 없습니다"라는 에러가 출력될 수 있음 (함수명과 괄호 사이에 있는 공백까지도 이름으로 간주)
  - 이 설정을 추가하면 프로시저나 함수명과 괄호 사이의 공백은 무시함
- ANSI
  - 위 여러 옵션을 조합해서 MySQL 서버가 최대한 SQL 표준에 맞게 동작하게 만들어줌

## 7.1.2 영문 대소문자 구분

MySQL 서버는 설치된 운영체제에 따라 테이블명의 대소문자를 구분한다.  
이는 MySQL의 DB나 테이블이 디스크의 디렉터리나 파일로 맵핑되기 때문이다.  
즉, 윈도우에 설치된 MySQL에서는 대소무나를 구분하지 않지만 유닉스 계열의 운영체제에서는 대소문자를 구분한다.  
MySQL 서버가 운영체제에 관계없이 대소문자 구분의 영향을 받지 않게 하려면 MySQL 서버의 설정 파일에 **lower_case_table_names** 시스템 변수를 설정하면 된다.  
설정값은 다음과 같다.

- 0: DB나 테이블명에 대해 대소문자 구분 (default)
- 1: 대소문자를 구분하지 않음 (모두 소문자로만 저장)
- 2: 저장은 대소문자를 구분해서 하지만 쿼리에서는 대소문자를 구분하지 않음

## 7.1.3 MySQL 예약어

생성하는 데이터베이스나 테이블, 칼럼의 이름을 예약어와 같은 키워드로 생성하면 해당 칼럼이나 테이블을 SQL에서 사용하기 위해서는 항상 역따옴표(`)나 쌍따옴표로 감싸줘야 한다.  
항상 테이블을 생성할 때는 역따옴표로 테이블이나 칼럼의 이름을 둘러싸지 않은 상태로 생성하길 권장한다.  
그래야만 예약어인지 아닌지를 MySQL 서버가 에러로 알려주기 때문이다.
