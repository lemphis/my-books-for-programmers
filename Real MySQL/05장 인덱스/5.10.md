# 5.10 유니크 인덱스

유니크란 사실 인덱스라기보다는 제약 조건에 가깝다고 볼 수 있다.  
말 그대로 테이블이나 인덱스에 같은 값이 두 개 이상 저장될 수 없음을 의미하는데, MySQL에서는 인덱스 없이 유니크 제약만 설정할 방법이 없다.  
유니크 인덱스에서 NULL도 저장될 수 있는데, NULL은 특정의 값이 아니므로 2개 이상 저장될 수 있다.

## 5.10.1 유니크 인덱스와 일반 보조 인덱스 비교

유니크 인덱스와 유니크하지 않은 일반 보조 인덱스는 사실 인덱스의 구조상 아무런 차이점이 없다.  
유니크 인덱스와 일반 보조 인덱스의 읽기와 쓰기를 성능 관점에서 살펴봤을 때 아래와 같다.

- 인덱스 읽기
  - 일반 보조 인덱스와 유니크 인덱스는 읽어야 할 레코드의 건수가 같다면 성능상의 차이는 미미함
- 인덱스 쓰기
  - 유니크 인덱스의 키값을 쓸 때는 중복된 값이 있는지 없는지 체크하는 과정이 한 단계 더 필요하기 때문에 일반 보조 인덱스의 쓰기보다 느림
  - MySQL에서는 유니크 인덱스에서 중복된 값을 체크할 때는 읽기 잠금을 사용하고, 쓰기를 할 때는 쓰기 잠금을 사용하는데 이 과정에서 데드락이 아주 빈번히 발생함
  - InnoDB 스토리지 엔진에서는 인덱스 키의 저장을 버퍼링 하기 위해 인서트 버퍼(Insert Buffer)가 사용되기 때문에 인덱스의 저장이나 변경 작업이 상당히 빨리 처리되지만 유니크 인덱스는 반드시 중복 체크를 해야 하므로 작업 자체를 버퍼링 하지 못함

## 5.10.2 유니크 인덱스 사용 시 주의사항

유일성이 꼭 보장돼야 하는 칼럼에 대해서는 유니크 인덱스를 생성하되, 꼭 필요하지 않다면 유니크 인덱스보다는 유니크하지 않은 보조 인덱스를 생성하는 방법도 고려해 보는 것이 좋다.
