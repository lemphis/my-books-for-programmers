# 5.6 Fractal-Tree 인덱스

Fractal-Tree는 아주 최근에 개발된 기술인데, 안타깝게도 독점적인 특허로 등록된 알고리즘이어서 아직 많은 DBMS에서 구현되지 못하고 있다.  
현재는 TokuTek이라는 회사에서 개발된 MySQL의 스토리지 엔진인 TokuDB에만 적용돼 있다.

## 5.6.1 Fractal-Tree의 특성

B-Tree 인덱스에서 인덱스 키를 검색하거나 변경하는 과정 중에 발생하는 가장 큰 문제는 디스크의 랜덤 I/O가 상대적으로 많이 필요하다는 것이다.  
Fractal-Tree는 이러한 B-Tree의 단점을 최소화하고, 이를 순차 I/O로 변환해서 처리할 수 있다는 것이 가장 큰 장점이다.  
그래서 Fractal-Tree를 스트리밍(Streaming) B-Tree라고도 한다.  
Fractal-Tree는 인덱스 키가 추가되거나 삭제될 때 B-Tree 인덱스보다 더 많은 정렬 작업이 필요하며, 이 때문에 더 많은 CPU 처리가 필요할지도 모른다.  
하지만 인덱스의 단편화가 발생하지 않도록 구성할 수 있고, 인덱스 키값을 클러스터링 하기 때문에 B-Tree보다 대용량 테이블에서 높은 성능을 보장한다.  
B-Tree 인덱스는 일정 수준을 넘어서면 급격한 성능 저하가 발생하는데, Fractal-Tree는 이런 급격한 성능 저하 현상이 없다.

오랜 시간 동안 데이터가 변경되면서 단편화가 발생하고, 그 때문에 인덱스의 효율이 떨어지는 현상을 에이징(Aging)이라고 한다.  
이러한 현상 때문에 테이블이나 인덱스 최적화(옵티마이즈)를 하게 되는데, Fractal-Tree에서는 이러한 현상이 발생하지 않기 때문에 별도의 최적화 작업이 필요하지 않다.

Fractal-Tree의 평균적인 처리 능력은 이론적으로 B-Tree보다 400배가량 빠르며, 실제로도 TokuDB의 키 추가 및 삭제 작업은 InnoDB보다 100배가량 빠른 처리 속도를 보여준다.

## 5.6.2 Fractal-Tree의 가용성과 효율성

Fractal-Tree의 또 다른 장점은 B-Tree의 장점을 그대로 Fractal-Tree도 가지고 있다는 것이다.  
그래서 현재 B-Tree로 생성된 인덱스를 Fractal-Tree로 변경해도 충분히 동일한 효과를 얻을 수 있다.
