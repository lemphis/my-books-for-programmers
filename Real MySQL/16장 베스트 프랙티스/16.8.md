# 16.8 복제를 사용하지 않는 MySQL의 설정

MySQL에서 복제를 사용하려면 바이너리 로그 파일이 활성화되어야 한다.  
MySQL의 시스템 설정값 중에 "log-bin"이라는 설정에 파일 이름이나 파일 경로가 명시되면 MySQL은 무조건 바이너리 로그를 활성화한다.  
하지만 MySQL의 바이너리 로그는 상당히 고비용의 디스크 I/O 작업을 필요로 한다.  
또한 바이너리 로그가 안전하게 슬레이브 MySQL 서버에 전달되게끔 MySQL 서버는 내부적으로 갭 락과 넥스트 키 락을 사용한다.  
즉 바이너리 로그는 I/O 부하뿐 아니라 InnoDB 테이블의 잠금까지도 영향을 미치게 되며, 이는 MySQL 서버의 전체적인 성능과 동시성까지 저하시키는 효과를 가져오게 된다는 것을 의미한다.  
또한 바이너리 로그는 증분 백업(incremental backup)을 위해 사용되는 경우도 가끔 있는데, MySQL 서버의 부하가 크다면 증분 백업은 MySQL 엔터프라이즈 백업에 포함된 ibbackup 도구를 이용하는 방법을 검토해 보는 것도 좋을 듯하다.

결론적으로 **복제를 사용하지 않는 MySQL 서버에서는 바이너리 로그를 비활성화하고, InnoDB가 갭 락과 넥스트 키 락을 사용하지 않게 트랜잭션 격리 수준을 READ-COMMITED로 사용**하는 것이 가장 좋다.  
이렇게 바이너리 로그가 비활성화되고 트랜잭션의 격리 수준이 READ-COMMITED로 설정되면 InnoDB는 갭 락이나 넥스트 키 락을 모두 제거하고, 오라클과 같이 순수하게 레코드만 잠그는 방식을 사용하게 된다.  
이는 INSERT INTO ... SELECT ... 와 같은 쿼리에서 SELECT 대상 테이블에 대한 읽기 잠금이 없어지는 것을 의미한다.  
하지만 이렇게 설정하더라도 유니크 인덱스나 프라이머리 키에 대한 중복 체크나 외래 키 제약에 대한 체크 작업에서는 여전히 갭 락이나 넥스트 키 락이 사용될 것이다.  
InnoDB를 주로 사용하는 MySQL에서는 디스크의 부하를 줄임과 동시에 동시성을 높여 줄 것이며, 그 밖의 MyISAM과 같은 스토리지 엔진을 주로 사용하는 MySQL에서는 적어도 디스크의 부하는 줄여줄 것이다.
