# 3.6 TOKUDB 스토리지 엔진

## 3.6.1 프랙탈 트리(Fractal Tree) 인덱스 지원

계속되는 INSERT, UPDATE 후 DELETE 작업으로 인덱스 페이지(블록) 내에 사용되지 못하는 공간이 생기는데 이러한 현상을 단편화(Fragmentation)라고 한다.  
단편화로 인해 단일 레코드를 검색하는 방식은 문제가 없지만 범위 검색(Range scan)과 같은 작업에는 더 많은 디스크 읽기가 유발된다.  
프랙탈 트리는 위와 같은 B-Tree의 단점을 보완한 새로운 형태의 인덱싱 알고리즘이다.

## 3.6.2 대용량 데이터와 빠른 INSERT 처리

프랙탈 트리는 인덱스에 새로운 레코드를 추가하는 작업이 상당히 빠르다.  
B-Tree에 새로운 레코드를 추가하는 작업은 상당한 랜덤 읽기와 쓰기 작업이 필요한 반면, 프랙탈 트리는 거의 순차 읽기와 쓰기 작업에 비교될 정도다.

## 3.6.3 트랜잭션 및 잠금 처리

TokuDB는 InnoDB와 동일하게 레코드 기반의 잠금과 트랜잭션 처리를 지원한다.  
하지만 트랜잭션의 격리 수준은 REPEATABLE_READ를 지원하지 않기 때문에 READ_UNCOMMITED나 READ_COMMITED를 사용해야 한다.

## 3.6.4 그 이외의 특징

TokuDB는 평균적으로 10~50배 정도 INSERT 작업이 빠르며, 데이터와 인덱스를 모두 압축해서 저장하기 때문에 많은 디스크 공간을 차지하지 않는다.  
일반적으로 압축 후 데이터 파일의 크기는 다른 스토리지 엔진에 비해 약 1/5~1/15 수준으로 줄어든다.  
다른 스토리지 엔진에서는 제공하지 않는 멀티 스레드 로딩 같은 기능도 포함되어 있다.
