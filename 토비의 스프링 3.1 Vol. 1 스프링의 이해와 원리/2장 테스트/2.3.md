# 2.3 개발자를 위한 테스팅 프레임워크 JUnit

JUnit은 사실상 자바의 표준 테스팅 프레임워크라고 불릴 만큼 폭넓게 사용되고 있다.  
스프링을 학습하고 제대로 활용하려면 최소한의 JUnit 테스트 작성 방법과 실행 방법은 알고 있어야 한다.  
테스트 없이는 스프링도 의미 없다.  
스프링 프레임워크 자체도 JUnit 프레임워크를 이용해 테스트를 만들어가며 개발됐다.

## 2.3.2 테스트 결과의 일관성

### 동일한 결과를 보장하는 테스트

단위 테스트는 항상 일관성 있는 결과가 보장돼야 한다.  
DB에 남아 있는 데이터와 같은 외부 환경에 영향을 받지 말아야 하는 것은 물론이고, 테스트를 실행하는 순서를 바꿔도 동일한 결과가 보장되도록 만들어야 한다.

### 포괄적인 테스트

개발자가 테스트를 직접 만들 때 자주 하는 실수가 하나 있다.  
바로 성공하는 테스트만 골라서 만드는 것이다.  
개발자는 머릿속으로 이 코드가 잘 돌아가는 케이스를 상상하면서 코드를 만드는 경우가 일반적이다.

하지만 개발자도 조금만 신경을 쓰면 자신이 만든 코드에서 발생할 수 있는 다양한 상황과 입력 값을 고려하는 포괄적인 테스트를 만들 수 있다.  
스프링의 창시자인 로드 존슨은 **"항상 네거티브 테스트를 먼저 만들라"** 는 조언을 했다.  
개발자는 빨리 테스트를 만들어 성공하는 것을 보고 다음 기능으로 나아가고 싶어 하기 때문에, 긍정적인 경우를 골라서 성공할 만한 테스트를 먼저 작성하게 되기가 쉽다.  
그래서 테스트를 작성할 때 **부정적인 케이스를 먼저 만드는 습관**을 들이는 게 좋다.

## 2.3.4 테스트가 이끄는 개발

### 테스트 주도 개발

만들고자 하는 기능의 내용을 담고 있으면서 만들어진 코드를 검증도 해줄 수 있도록 테스트 코드를 먼저 만들고, 테스트를 성공하게 해주는 코드를 작성하는 방식의 개발을 `테스트 주도 개발(TDD, Test Driven Development)`이라고 한다.  
또는 테스트를 코드보다 먼저 작성한다고 해서 테스트 우선 개발(Test First Development)이라고도 한다.  
TDD는 개발자가 테스트를 만들어가며 개발하는 방법이 주는 장점을 극대화한 방법이라고 볼 수 있다.  
**"실패한 테스트를 성공시키기 위한 목적이 아닌 코드는 만들지 않는다"** 는 것이 TDD의 기본 원칙이다.  
이 원칙을 따랐다면 만들어진 모든 코드는 빠짐없이 테스트로 검증된 것이라고 볼 수 있다.  
TDD에서는 테스트를 작성하고 이를 성공시키는 코드를 만드는 작업의 주기를 가능한 한 짧게 가져가도록 권장한다.

## 2.3.5 테스트 코드 개선

### 픽스처

테스트를 수행하는 데 필요한 정보나 오브젝트를 `픽스처(fixture)`라고 한다.  
일반적으로 픽스처는 여러 테스트에서 반복적으로 사용되기 때문에 @Before 메서드를 이용해 생성해두면 편리하다.
