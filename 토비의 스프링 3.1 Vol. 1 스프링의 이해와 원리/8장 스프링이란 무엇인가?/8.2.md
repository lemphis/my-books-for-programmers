# 8.2 스프링의 목적

## 8.2.1 엔터프라이즈 개발의 복잡함

### 복잡함의 근본적인 이유

- 기술적인 제약 조건과 요구 사항이 늘어가기 때문
- 엔터프라이즈 애플리케이션이 구현해야 할 핵심 기능인 비즈니스 로직의 복잡함 증가

### 복잡함을 가중시키는 원인

엔터프라이즈 애플리케이션이 실패하는 주요 원인은 비즈니스 로직의 복잡함과 기술적인 복잡함이다.  
복잡하다는 것은 양이 많고 어렵다는 뜻이 아니라 세부 요소가 이해하기 힘든 방식으로 얽혀 있기 때문에 쉽게 다루기 어렵다는 의미다.  
자바 엔터프라이즈 시스템 개발이 어려운 가장 큰 이유는 근본적인 비즈니스 로직과 엔터프라이즈 기술이라는 두 가지 복잡함이 한데 얽혀 있기 때문이다.

## 8.2.2 복잡함을 해결하려는 도전

### 제거될 수 없는 근본적인 복잡함

엔터프라이즈 개발에 나타나는 복잡함의 원인은 제거 대상이 아니다.  
대신 그 복잡함을 효과적으로 상대할 수 있는 전략과 기법이 필요하다.  
문제는 비즈니스 로직의 복잡함을 효과적으로 다루기 위한 방법과 기술적인 복잡함을 효과적으로 처리하는 데 적용되는 방법이 다르다는 점이다.  
가장 먼저 할 일은 성격이 다른 이 두 가지 복잡함을 분리해 내는 것이다.

### 실패한 해결책: EJB

EJB의 기본 전략도 두 가지 종류의 복잡함을 분리하는 것이었다.  
EJB는 기술적인 복잡함을 애플리케이션의 핵심 로직에서 일부분 분리하는 데 성공했으나 오히려 EJB라는 환경과 스펙에 종속되는 코드로 만들어져야 하는 더 큰 부담을 안게 됐다.  
EJB는 결국 객체지향적인 특성은 잃어버린 밋밋한 서비스 스크립트성 코드로 변질되어갔다.

### 비침투적인 방식을 통한 효과적인 해결책: 스프링

EJB처럼 어떤 기술을 적용했을 때 그 기술과 관련된 코드나 규약 등이 코드에 등장하는 경우를 침투적인(invasive) 기술이라고 한다.  
이는 꼭 필요한 기능을 사용하는 것도 아니면서 단지 어떤 기술을 바탕으로 만들어진다고 해서 특정 클래스나 인터페이스, API 등의 코드에 마구 등장하여 복잡함을 가중시키는 원인이 된다.  
반면 비침투적인(non-invasive) 기술은 기술의 적용 사실이 코드에 직접 반영되지 않는다는 특징이 있다.  
스프링이 성공할 수 있었던 비결은 바로 비침투적인 기술이라는 전략을 택했기 때문이다.

## 8.2.3 복잡함을 상대하는 스프링의 전략

스프링의 기본적인 전략은 비즈니스 로직을 담은 애플리케이션 코드와 엔터프라이즈 기술을 처리하는 코드를 분리시키는 것이다.

### 기술적 복잡함을 상대하는 전략

스프링은 엔터프라이즈 기술을 적용했을 때 발생하는 복잡함의 문제를 두 가지로 분류하고 각각에 대한 적절한 대응 방법을 제공한다.

#### 첫 번째 문제: 기술에 대한 접근 방식이 일관성이 없고, 특정 환경에 종속적이다

환경이 바뀌고, 서버가 바뀌고, 적용되는 조건이 바뀌면 적용하는 기술이 달라지고 그에 따라 코드도 바뀐다는 건 심각한 문제다.  
목적이 유사하지만 호환이 안 되는 표준, 비표준, 오픈 소스, 상용 제품 등이 제공하는 각기 다른 API를 사용하도록 코드를 일일이 변경해야 하는 번거로움이 발생한다.  
이렇게 일관성 없는 기술과 서버 환경의 변화에 대한 스프링의 공략 방법은 바로 `서비스 추상화`다.

#### 두 번째 문제: 기술적인 처리를 담당하는 코드가 성격이 다른 코드에 섞여서 등장한다

비즈니스 로직 전후로 설정되어야 하는 트랜잭션, 비즈니스 로직에 대한 보안 적용, 계층 사이에 주고받는 데이터와 예외의 일괄 변환이나 로깅이나 감사(audit) 기능 등이 대표적인 예다.  
이런 기술과 비즈니스 로직의 혼재로 발생하는 복잡함을 해결하기 위한 스프링의 접근 방식은 바로 `AOP`다.

### 비즈니스와 애플리케이션 로직의 복잡함을 상대하는 전략

비즈니스 로직의 복잡함을 상대하는 전략은 자바라는 객체지향 기술 그 자체다.  
스프링은 단지 객체지향 언어의 장점을 제대로 살리지 못하게 방해했던 요소를 제거하도록 도와줄 뿐이다.

### 핵심 도구: 객체지향과 DI

스프링의 모토는 결국 "기본으로 돌아가자"이다.  
자바의 기본인 객체지향에 충실한 설계가 가능하도록 단순한 오브젝트로 개발할 수 있고, 객체지향의 설계 기법을 잘 적용할 수 있는 구조를 만들기 위해 DI 같은 유용한 기술을 편하게 적용하도록 도와주는 것이 스프링의 기본 전략이다.  
기술적인 복잡함을 효과적으로 다루게 해주는 기법은 모두 DI를 바탕으로 하고 있다.  
서비스 추상화, 템플릿/콜백, AOP와 같은 스프링의 기술은 DI 없이는 존재할 수 없는 것들이다.  
그리고 DI는 객체지향 설계 기술이 없이는 그 존재 의미가 없다.  
DI란 특별한 기술이라기보다는 유연하게 확장할 수 있는 오브젝트 설계를 하다 보면 자연스럽게 적용하게 되는 객체지향 프로그래밍 기법일 뿐이다.

결국 모든 스프링의 기술과 전략은 객체지향이라는 자바 언어가 가진 강력한 도구를 극대화해서 사용할 수 있도록 돕는 것이라고 볼 수 있다.  
형장의 업무를 잘 지원하고 유연하게 대응할 수 있는 뛰어난 애플리케이션을 만드는 것은 객체지향을 잘 활용해서 복잡한 문제를 풀어나갈 줄 아는 개발자의 능력에 달려 있다는 사실을 잊지 말아야 한다.
