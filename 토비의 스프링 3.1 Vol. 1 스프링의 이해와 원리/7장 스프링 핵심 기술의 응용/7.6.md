# 7.6 스프링 3.1의 DI

많은 변화 속에서 스프링이 꾸준히 호환성을 지키고 안정된 기술을 유지해 올 수 있었던 것은 스프링이 지지하고 지원하는 객체지향적인 코드의 장점인 유연성과 확장성을 스프링 스스로가 충실하게 지켜왔기 때문이다.

스프링이 제공하는 모든 기술의 기초가 되는 DI의 원리는 변하지 않았지만 DI가 적용된 코드를 작성할 때 사용하는 핵심 도구인 자바 언어에는 그간 적지 않은 변화가 있었고, 이런 변화들이 DI 프레임워크로서 스프링의 사용 방식에도 여러 가지 영향을 줬다.

- 애너테이션의 메타 정보 활용
  - 자바 코드의 일부를 리플렉션 API 등을 이용해 어떻게 만들었는지 살펴보고 그에 따라 동작하는 기능이 점점 많이 사용되고 있음
  - 애너테이션은 애플리케이션을 아래 세 가지로 구성하는 방식과 잘 어울리기 때문에 애너테이션의 활용이 늘어남
    - 핵심 로직을 담은 자바 코드
    - 이를 지원하는 IoC 방식의 프레임워크
    - 프레임워크가 참조하는 메타 정보
- 정책과 관례를 이용한 프로그래밍
  - 애너테이션 같은 메타 정보를 활용하는 프로그래밍 방식은 코드를 이용해 명시적으로 동작 내용을 기술하는 대신 코드 없이도 미리 약속한 규칙 또는 관례를 따라서 프로그램이 동작하도록 만드는 프로그래밍 스타일을 적극적으로 포용하게 만들어왔음
  - 이런 스타일의 프로그래밍은 자바 코드로 모든 작업 과정을 직접 표현했을 때에 비해서 작성해야 할 내용이 줄어드는 장점이 있음

## 7.6.1 자바 코드를 이용한 빈 설정

### \<context:annotation-config /> 제거

XML에 담긴 DI 정보를 이용하는 스프링 컨테이너를 사용하는 경우에는 @PostConstruct와 같은 애너테이션의 기능이 필요하면 반드시 \<context:annotation-config />를 포함시켜서 필요한 빈 후처리기가 등록되게 만들어야 한다.  
반면에 @Configuration이 붙은 설정 클래스를 사용하는 컨테이너가 사용되면 컨테이너가 직접 @PostConstruct 애너테이션을 처리하는 빈 후처리기를 등록해 준다.

### \<bean>의 전환

\<bean>으로 정의된 DI 정보는 자바 코드, 특별히 @Bean이 붙은 메서드와 거의 1:1로 매핑된다.  
\<bean>은 @Bean이 붙은 public 메서드로 만들어주면 되고, 메서드 이름은 \<bean>의 id 값으로 한다.  
생성할 빈 오브젝트의 클래스는 \<bean>의 class에 나온 것을 그대로 사용하면 된다.

### 전용 태그 전환

스프링 3.1은 XML에서 자주 사용되는 전용 태그를 @Enable로 시작하는 애너테이션으로 대체할 수 있게 다양한 애너테이션을 지원한다.  
대표적으로 \<tx:annotation-driven />을 대신해서 @EnableTransactionManagement를 사용할 수 있다.
