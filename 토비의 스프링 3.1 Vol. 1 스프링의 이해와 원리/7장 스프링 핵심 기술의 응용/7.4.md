# 7.4 인터페이스 상속을 통한 안전한 기능확장

## 7.4.1 DI와 기능의 확장

DI의 가치를 제대로 얻으려면 먼저 DI에 적합한 오브젝트 설계가 필요하다.

### DI를 의식하는 설계

객체지향 설계를 잘 할 수 있는 방법 중 하나는 **DI를 의식하면서 설계**하는 방식이다.  
DI를 적용하려면 최소한 두 개 이상의, 의존 관계를 가지고 서로 협력해서 일하는 오브젝트가 필요하다.  
이에 맞게 적절한 책임에 따라 오브젝트를 분리해야 한다.  
DI는 런타임 시에 의존 오브젝트를 다이내믹하게 연결해 줘서 유연한 확장을 꾀하는 게 목적이기 때문에 항상 확장을 염두에 두고 오브젝트 사이의 관계를 생각해야 한다.

확장은 항상 미래에 일어나는 일이다.  
지금 당장 기능이 동작하는 데 아무런 문제가 없으면 된다고 생각하면 오늘을 위한 설계밖에 나오지 않는다.  
**DI란 결국 미래를 프로그래밍하는 것**이다.

### DI와 인터페이스 프로그래밍

DI를 적용할 때는 가능한 한 인터페이스를 사용하게 해야 한다.  
물론 의존 오브젝트가 생성자나 수정자 등을 통해 주입만 가능하면 되기 때문에 의존 오브젝트의 클래스 타입을 클라이언트가 직접 사용해도 문제가 되지는 않지만 DI를 DI답게 사용하려면 두 개의 오브젝트가 인터페이스를 통해 느슨하게 연결되어야 한다.  
인터페이스를 사용해야 하는 이유는 다음과 같다.

- 다형성을 얻기 위함
- 인터페이스 분리 원칙을 통해 클라이언트와 의존 오브젝트 사이의 관계를 명확하게 해줄 수 있음

오브젝트가 그 자체로 충분히 응집도가 높은 작은 단위로 설계됐더라도, 목적과 관심이 각각 다른 클라이언트가 있다면 인터페이스를 통해 이를 적절하게 분리해 줄 필요가 있고, 이를 객체지향 설계 원칙에서는 `인터페이스 분리 원칙(Interface  Segregation Principle)`이라고 부른다.  
인터페이스를 사용하지 않고 클래스를 직접 참조하는 방식으로 DI를 했다면, 인터페이스 분리 원칙과 같은 클라이언트에 특화된 의존 관계를 만들어 낼 방법 자체가 없는 것이다.

## 7.4.2 인터페이스 상속

하나의 오브젝트가 구현하는 인터페이스를 여러 개 만들어서 구분하는 이유 중의 하나는 오브젝트의 기능이 발전하는 과정에서 다른 종류의 클라이언트가 등장하기 때문이다.  
때로는 인터페이스를 여러 개 만드는 대신 기존 인터페이스를 상속을 통해 확장하는 방법도 사용된다.  
새로운 인터페이스를 추가할지, 기존 인터페이스를 상속할지는 오브젝트 사이의 의존 관계와 목적에 따라 적절한 방식을 택하면 된다.  
중요한 것은 **클라이언트가 정말 필요한 기능을 가진 인터페이스를 통해 오브젝트에 접근하도록 만들었는가**이다.

잘 적용된 DI는 결국 잘 설계된 오브젝트 의존 관계에 달려 있다.  
인터페이스를 적절하게 분리하고 확장하는 방법을 통해 오브젝트 사이의 의존 관계를 명확하게 해 주고, 기존 의존 관계에는 영향을 주지 않으면서 유연한 확장성을 얻는 방법이 무엇인지 항상 고민해야 한다.
