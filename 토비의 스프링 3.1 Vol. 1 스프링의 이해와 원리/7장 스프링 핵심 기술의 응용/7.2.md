# 7.2 인터페이스의 분리와 자기 참조 빈

## 7.2.1 XML 파일 매핑

스프링의 XML 설정 파일에서 \<bean> 태그 안에 SQL 정보를 넣어놓고 활용하는 건 좋은 방법이 아니다.  
그보다는 SQL을 저장해 두는 전용 포맷을 가진 독립적인 파일을 이용하는 편이 바람직하다.

### JAXB

XML에 담긴 정보를 파일에서 읽어오는 방법은 다양하다.  
가장 간단하게 사용할 수 있는 방법 중 JAXB(Java Architecture for XML Binding)가 있다.

### 언마샬링

XML 문서를 읽어서 자바의 오브젝트로 변환하는 것을 JAXB에서는 언마샬링(unmarshalling)이라고 부른다.  
반대로 바인딩 오브젝트를 XML 문서로 변환하는 것은 마샬링(marshalling)이라고 한다.  
자바 오브젝트를 바이트 스트림으로 바꾸는 걸 직렬화(serialization)라고 부르는 것과 비슷하다.

## 7.2.3 빈의 초기화 작업

생성자에서 예외가 발생할 수도 있는 복잡한 초기화 작업을 다루는 것은 좋지 않다.  

- 오브젝트를 생성하는 중에 생성자에서 발생하는 예외는 다루기 힘듦
- 상속하기 불편함
- 보안에 문제가 생길 수 있음

일단 **초기 상태를 가진 오브젝트를 만들어 놓고 별도의 초기화 메서드를 사용**하는 방법이 바람직하다.  
위와 같은 작업을 수행하기 위해 `@PostConstruct` 애너테이션을 사용할 수 있다.  
@PostConstruct는 java.lang.annotation 패키지에 포함된 공통 애너테이션(Common Annotations)의 한 가지로 JavaEE 5나 JDK 6에 포함된 표준 애너테이션이다.  
**스프링은 @PostConstruct 애너테이션을 빈 오브젝트의 초기화 메서드를 지정하는 데 사용**한다.  
스프링은 빈의 오브젝트를 생성하고 DI 작업을 마친 뒤에 @PostConstruct가 붙은 메서드를 자동으로 실행해 준다.

## 7.2.5 자기참조 빈으로 시작하기

### 자기참조 빈 설정

자기 자신을 참조하는 빈은 사실 흔히 쓰이는 방법은 아니다.  
책임이 다르다면 클래스를 구분하고 각기 다른 오브젝트로 만드는 것이 자연스럽다.

## 7.2.6 디폴트 의존관계

확장을 고려해서 기능을 분리하고, 인터페이스와 전략 패턴을 도입하고, DI를 적용한다면 늘어난 클래스와 의존 관계 설정에 대한 부담은 감수해야 한다.  
특정 의존 오브젝트가 대부분의 환경에서 거의 디폴트라고 해도 좋을 만큼 기본적으로 사용될 가능성이 있다면, 디폴트 의존 관계를 가지는 빈을 만드는 것을 고려해 볼 필요가 있다.  
디폴트 의존 관계란 외부에서 DI 받지 않는 경우 기본적으로 자동 적용되는 의존 관계를 말한다.  
DI 설정이 없을 경우 디폴트로 적용하고 싶은 의존 오브젝트를 생성자에게 넣어준다.
