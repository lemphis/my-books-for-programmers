# 1.6 엔티티와 밸류

도출한 모델은 크게 엔티티(Entity)와 밸류(Value)로 구분할 수 있다.  
엔티티와 밸류를 제대로 구분해야 도메인을 올바르게 설계하고 구현할 수 있기 때문에 이 둘의 차이를 명확하게 이해하는 것은 도메인을 구현하는 데 있어 중요하다.

## 1.6.1 엔티티

**엔티티의 가장 큰 특징은 식별자를 가진다는 것**이다.  
식별자는 엔티티 객체마다 고유해서 각 엔티티는 서로 다른 식별자를 갖는다.
엔티티를 생성하고 속성을 바꾸고 삭제할 때까지 식별자는 유지된다.

엔티티의 식별자는 바뀌지 않고 고유하기 때문에 **두 엔티티 객체의 식별자가 같으면 두 엔티티는 같다**고 판단할 수 있다.

## 1.6.2 엔티티의 식별자 생성

엔티티의 식별자를 생성하는 시점은 도메인의 특징과 사용하는 기술에 따라 달라진다.  
흔히 식별자는 다음 중 한 가지 방식으로 생성한다.

- 특정 규칙에 따라 생성
- UUID나 Nan ID와 같은 고유 식별자 생성기 사용
- 값을 직접 입력
- 일련번호 사용(시퀀스나 DB의 자동 중거 칼럼 사용)

## 1.6.3 밸류 타입

밸류 타입은 개념적으로 완전한 하나를 표현할 때 사용한다.  
밸류 타입은 의미를 명확하게 표현하기 위해 밸류 타입을 사용하는 경우도 있다.  
밸류 타입은 코드를 이해하는 데 도움이 되며, 밸류 타입을 위한 기능을 추가할 수 있다는 장점이 있다.  
밸류 객체의 데이터를 변경할 때는 기존 데이터를 변경하기보다는 변경한 데이터를 갖는 새로운 밸류 객체를 생성하는 방식을 선호한다.  
두 밸류 객체를 비교할 때는 모든 속성이 같은지 비교한다.

## 1.6.4 엔티티 식별자와 밸류 타입

엔티티 식별자의 실제 데이터는 String과 같은 문자열로 구성된 경우가 많다.  
신용카드 번호도 16개의 숫자로 구성된 문자열이며 많은 온라인 서비스에서 회원을 구분할 때 사용하는 이메일 주소도 문자열이다.  
이런 **식별자는 단순한 문자열이 아니라 도메인에서 특별한 의미를 지니는 경우가 많기 때문에 식별자를 위한 밸류 타입을 사용**해서 의미가 잘 드러나도록 할 수 있다.

## 1.6.5 도메인 모델에 set 메서드 넣지 않기

도메인 모델에 get/set 메서드를 무조건 추가하는 것은 좋지 않은 버릇이다.  
특히 set 메서드는 도메인의 핵심 개념이나 의도를 코드에서 사라지게 한다.  
set 메서드는 필드값만 변경하고 끝나기 때문에 상태 변경과 관련된 도메인 지식이 코드에서 사라지게 된다.  
set 메서드의 또 다른 문제는 도메인 객체를 생성할 때 온전하지 않은 상태가 될 수 있다는 것이다.  
도메인 객체가 불완전한 상태로 사용되는 것을 막으려면 생성 시점에 필요한 것을 전달해 주어야 한다.

불변 밸류 타입을 사용하면 자연스럽게 밸류 타입에는 set 메서드를 구현하지 않는다.  
set 메서드를 구현해야 할 특별한 이유가 없다면 불변 타입의 장점을 살릴 수 있도록 밸류 타입은 불변으로 구현한다.
