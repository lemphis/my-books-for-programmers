# 4.1 JPA를 이용한 리포지터리 구현

도메인 모델과 리포지터리를 구현할 때 선호하는 기술을 꼽자면 `JPA`를 들 수 있다.  
데이터 보관소로 RDBMS를 사용할 때, 객체 기반의 도메인 모델과 관계형 데이터 모델 간의 매핑을 처리하는 기술로 ORM 만한 것이 없다.

## 4.1.1 모듈 위치

리포지터리 인터페이스는 애그리거트와 같이 도메인 영역에 속하고, 리포지터리를 구현한 클래스는 인프라스트럭처 영역에 속한다.

## 4.1.2 리포지터리 기본 기능 구현

리포지터리가 제공하는 기본 기능은 다음 두 가지다.

- ID로 애그리거트 조회하기
- 애그리거트 저장하기

인터페이스는 애그리거트 루트를 기준으로 작성한다.  
주문 애그리거트는 Order를 비롯해 OrderLine, Orderer, ShippingInfo 등 다양한 객체를 포함하는데, 이 구성요소 중에서 루트 엔티티인 Order를 기준으로 리포지터리 인터페이스를 작성한다.

> 다수의 개발자는 스프링과 JPA로 구현할 때 스프링 데이터 JPA를 사용한다.  
> 리포지터리 인터페이스만 정의하면 나머지 리포지터리 구현 객체는 스프링 데이터 JPA가 알아서 만들어준다.  
> 그래서 실질적으로 리포지터리 인터페이스를 구현한 클래스를 직접 작성할 일은 없다.
