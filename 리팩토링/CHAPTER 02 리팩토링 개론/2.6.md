# 2.6 리팩토링과 설계

리팩토링은 설계를 보완하는 특수한 역할을 한다.  
많은 사람들은 설계가 핵심이고, 프로그래밍은 도구에 불과하다고 생각한다.  
이러한 비유는 마치 설계는 기술 도면이고, 코드는 건설 작업으로 생각하는 것과도 같다.  
그러나 소프트웨어는 실물의 기계와 달리 유연하며 하나부터 열까지 생각을 통해 이뤄진다.

리팩토링이 사전 설계를 대체할 수 있다는 일각의 주장도 있다.  
그렇게 리팩토링으로 사전 설계를 대체할 땐 설계를 하면 안 된다.  
일단 머릿속 아이디어를 코딩하고 잘 돌아가게 만든 후 그것을 리팩토링으로 세밀히 다듬어야 한다.

리팩토링을 실시하면 중점적인 작업이 달라진다.  
여전히 사전 설계는 해야 하지만, 사전 설계 과정에서는 완벽한 솔루션을 찾을 필요 없이 적당한 솔루션만 생각하면 된다.  
솔루션을 구축해 나가면서 문제를 더 잘 이해하게 되며, 최상의 솔루션이 처음의 생각과는 다르다는 사실을 깨닫게 된다.  
리팩토링을 실시하면 수정 비용이 들지 않으니 그쯤은 문제도 아니다.

이러한 작업 중점 이동으로 얻게 되는 주된 장점은 설계가 단순해진다는 점이다.  
모든 부분을 유연하게 만들자면 전체 시스템이 훨씬 복잡해지고 유지 보수 비용도 높아진다.  
그러나 당연한 얘기지만 시스템 전체를 유연하게 할 필요는 없다.  
유연성이 필요한 곳은 일부이고, 그나마 그런 부분이 어딘지를 예측하는 것도 불가능하다.  
따라서 유연성을 높이려면 실제 필요한 것보다 훨씬 많은 유연성을 넣게 된다.

리팩토링을 통해 개발자는 수정할 때 따르는 위험성에 다른 각도로 대처할 수 있다.  
개발자는 여전히 잠재적 수정 가능성을 생각하고 유연한 솔루션을 고려한다.  
하지만 무작정 유연한 솔루션을 구현할 것이 아니라 먼저 "단순한 솔루션을 구현해 놓고 그걸 나중에 유연한 솔류션으로 리팩토링하려면 얼마나 수고가 들까?" 하고 스스로 고민해 보자.  
그래서 만약 웬만한 경우처럼 어려움이 없다고 판단되면 고민할 것 없이 단순한 솔루션을 구현하면 된다.

리팩토링을 실시하면 유연성을 낮추지 않고도 더 간결한 설계가 가능해진다.  
그래서 설계 과정이 쉬워지고 스트레스도 줄어든다.  
리팩토링을 쉽게 할 수 있는 감각을 넓히게 되면 그땐 유연한 솔루션은 떠오르지도 않는다.  
때가 되면 어련히 리팩토링하게 되리란 확신이 있기 때문이다.  
잘 돌아갈 정도로만 제일 단순한 솔루션을 구축하자.  
유연하고 복잡한 설계가 필요한 상황은 거의 없으니 말이다.
