# 7.7 외래 클래스에 메서드 추가 Introduce Foreign Method

_사용 중인 서버 클래스에 메서드를 추가해야 하는데 그 클래스를 수정할 수 없을 땐 클라이언트 클래스 안에 서버 클래스의 인스턴스를 첫 번째 인자로 받는 메서드를 작성하자._

## 동기

원본 클래스가 수정 가능하다면 그 기능의 메서드를 추가하면 된다.  
하지만 원본 클래스를 수정할 수 없다면 그 메서드를 클라이언트 클래스 안에 작성해야 한다.

필요한 메서드를 클라이언트 클래스 안에서 한 번만 사용한다면 추가 코딩은 별문제가 아니고 원본 클래스에는 필요가 없을 것이다.  
하지만 메서드를 여러 번 사용한다면 이 코드를 여기저기에 중복되게 작성해야 할 것이다.  
중복 코드는 모든 소프트웨어를 악화시키는 근원이므로 이런 중복 코드는 하나의 메서드로 만들어야 한다.  
이 리팩토링 기법을 실시할 때 새로 만들 메서드를 외래 메서드로 만들면 그 메서드가 원래는 원본 메서드인 서버 메서드에 있어야 할 메서드임을 분명히 나타낼 수 있다.

서버 클래스에 수많은 외래 메서드를 작성해야 하거나 하나의 외래 메서드를 여러 클래스가 사용해야 할 때는 이 기법 대신 [국소적 상속 확장 클래스 사용](../CHAPTER%2007%20객체%20간의%20기능%20이동/7.8.md) 기법을 실시해야 한다.

외래 메서드는 임시방편에 불과하다.  
가능하면 외래 메서드를 원래 있어야 할 위치로 옮겨 보자.  
코드 저작권이 문제라면 외래 메서드를 서버 클래스 제작자에게 보내서 직접 구현해 달라고 요청하자.

## 방법

1. 필요한 기능의 메서드를 클라이언트 클래스 안에 작성하자.
   - 그 메서드는 클라이언트 클래스의 어느 기능에도 접근해선 안 된다. 그 메서드에 값이 필요할 땐 매개변수로 전달해야 한다.
2. 서버 클래스의 인스턴스를 첫 번째 매개변수로 만들자.
3. 그 메서드에 '서버 클래스에 있을 외래 메서드' 같은 주석을 달자.
   - 이렇게 하면 나중에 그 외래 메서드를 옮길 일이 생겼을 때 문자열 검색 기능으로 외래 메서드를 쉽게 찾을 수 있다.

## 예제

- AS-IS

```java
Date newStart = new Date(previousEnd.getYear(), previousEnd.getMonth(), previousEnd.getDate() + 1);
```

- TO-BE

```java
Date newStart = nextDay(previousEnd);

private static Date nextDay(Date arg) {
   // Date 클래스에 있을 외래 메서드
    return new Date(arg.getYear(), arg.getMonth(), arg.getDate() + 1);
}
```
