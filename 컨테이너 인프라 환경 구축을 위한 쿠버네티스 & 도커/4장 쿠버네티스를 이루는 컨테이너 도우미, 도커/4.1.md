# 4.1 도커를 알아야 하는 이유

최근에는 도커를 몰라도 쿠버네티스를 사용하는 것이 가능해졌습니다.  
하지만 쿠버네티스를 이루고 있는 기술 자체는 컨테이너를 벗어날 수 없습니다.  
따라서 트러블 슈팅을 제대로 하려면 컨테이너를 잘 알아야 합니다.

## 4.1.1 파드, 컨테이너, 도커, 쿠버네티스의 관계

파드들은 워커 노드라는 노드 단위로 관리하며, 워커 노드와 마스터 노드가 모여 쿠버네티스 클러스터가 됩니다.  
그리고 파드는 1개 이상의 컨테이너로 이루어져 있습니다.

컨테이너를 돌보는 것이 파드고, 파드를 돌보는 것이 쿠버네티스 워커 노드이며, 워커 노드를 돌보는 것이 쿠버네티스 마스터입니다.

이 구조를 이루는 가장 기본인 컨테이너는 하나의 운영 체제 안에서 커널을 공유하며 개별적인 실행 환경을 제공하는 격리된 공간입니다.  
각 컨테이너가 독립적으로 작동하기 때문에 여러 컨테이너를 효과적으로 다룰 방법이 필요해졌습니다.  
오래전부터 유닉스나 리눅스는 하나의 호스트 운영 체제 안에서 자원을 분리해 할당하고, 실행되는 프로세스를 격리해서 관리하는 방법을 제공했습니다.  
하지만 파일 시스템을 설정하고 자원과 공간을 관리하는 등의 복잡한 과정을 직접 수행해야 해서 일부 전문가만 사용할 수 있다는 단점이 있었습니다.  
이런 복잡한 과정을 쉽게 만들어 주는 도구로 등장한 것이 `도커`입니다.

## 4.1.2 다양한 컨테이너 관리 도구

- `컨테이너디(Containerd)`
  - Docker사에서 컨테이너 런타임 부분을 분리하여 만든 오픈 소스 컨테이너 관리 도구
  - 쿠버네티스와의 통신에 필요한 CRI(Container Runtime Interface) 규격에 맞춰 구현한 플러그인을 사용해 쿠버네티스와 통합 가능
  - 다른 시스템과 통합해 컨테이너를 관리하는 기능을 제공하기 때문에 컨테이너 관리 도구를 직접 개발하려는 개발자에게 적합
- `크라이오(CRI-O)`
  - 도커나 컨테이너디와 달리 쿠버네티스와 통합하는 것이 주목적
  - 다른 도구보다 가볍고 단순함
  - CRI 규격을 자체적으로 구현하고 있어서 별도의 구성 요소나 플러그인 없이 쿠버네티스와 통합 가능
- `카타 컨테이너(Kata Containers)`
  - 오픈스택 재단에서 후원하는 오픈 소스 컨테이너 관리 도구
  - 컨테이너마다 독립적인 커널을 제공함
  - 기술적으로 보면 기존 컨테이너 방식과 가상화 방식의 중간 영역
- `도커(Docker)`
  - Docker사에서 2013년에 만든 컨테이너 관리 도구
  - 컨테이너 관리 기능 외에도 컨테이너를 실행하는 데 필요한 이미지를 만들거나 공유하는 등의 다양한 기능 제공
  - 사용자가 명령어를 입력하는 CLI(Command Line Interface)와 명령을 받아들이는 도커 데몬으로 구성
  - 1.11 이전 버전에서는 도커가 직접 컨테이너를 제어했으나 이후부터는 별도의 컨테이너디를 포함함
  - 도커와 쿠버네티스를 함께 설치할 경우 쿠버네티스는 컨테이너 오케스트레이션을 위해 도커에 포함된 컨테이너디 활용
