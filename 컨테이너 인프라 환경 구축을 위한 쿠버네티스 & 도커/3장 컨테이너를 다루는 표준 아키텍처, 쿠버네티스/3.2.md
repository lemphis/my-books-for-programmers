# 3.2 쿠버네티스 기본 사용법 배우기

## 3.2.2 오브젝트란?

쿠버네티스를 사용하는 관점에서 파드와 디플로이먼트는 `스펙(spec)`과 `상태(status)` 등의 값을 가지고 있습니다.  
이러한 값을 가지고 있는 파드와 디플로이먼트를 개별 속성을 포함해 부르는 단위를 `오브젝트(Object)`라고 합니다.

### 기본 오브젝트

- `파드(Pod)`
  - 쿠버네티스에서 실행되는 최소 단위
  - 독립적인 공간과 사용 가능한 IP를 가지고 있음
  - 하나의 파드는 1개 이상의 컨테이너를 가지고 있기 때문에 여러 기능을 묶어 하나의 목적으로 사용할 수도 있음
  - 범용으로 사용할 때는 대부분 1개의 파드에 1개의 컨테이너 적용
- `네임스페이스(Namespaces)`
  - 쿠버네티스 클러스터에서 사용되는 리소스들을 구분해 관리하는 그룹
  - 특별히 지정하지 않으면 기본으로 default로 할당
- `볼륨(Volume)`
  - 파드가 생성될 때 파드에서 사용할 수 있는 디렉터리 제공
  - 파드가 사라지더라도 저장과 보존이 가능한 디렉터리를 생성하고 사용할 수 있음
- `서비스(Service)`
  - 파드 접속을 안정적으로 유지하도록 내/외부로 연결
  - 파드가 새로 생성될 때 부여되는 새로운 IP를 기존에 제공하던 기능과 연결해 줌
  - 쿠버네티스 외부에서 쿠버네티스 내부로 접속할 때 내부가 어떤 구조로 돼 있는지, 파드가 살았는지 죽었는지 신경 쓰지 않아도 이를 논리적으로 연결하는 것

### 디플로이먼트

기본 오브젝트만으로도 쿠버네티스를 사용할 수 있지만 한계가 있어서 이를 좀 더 효율적으로 작동하도록 기능들을 조합하고 추가해 구현한 것이 `디플로이먼트(Deployment)`입니다.  
이외에도 데몬셋(DaemonSet), 컨피그맵(ConfigMap), 레플리카셋(ReplicaSet), PV(PersistentVolume), PVC(PersistentVolumeClaim), 스테이트풀셋(StatefulSet) 등이 있습니다.  
앞으로도 요구 사항에 따라 목적에 맞는 오브젝트들이 추가될 것입니다.  
쿠버네티스에서 가장 많이 쓰이는 디플로이먼트 오브젝트는 파드에 기반을 두고 있으며, 레플리카셋 오브젝트를 합쳐 놓은 형태입니다.

## 3.2.4 스펙을 지정해 오브젝트 생성하기

디플로이먼트를 생성하면서 한꺼번에 여러 개의 파드를 만들고 싶다면 필요한 내용을 파일로 작성해야 합니다.  
이 때 작성하는 파일을 `오브젝트 스펙(spec)`이라고 합니다. 일반적으로 YAML 문법으로 작성합니다.

## 3.2.5 apply로 오브젝트 생성하고 관리하기

run 명령은 단일 파드만을 생성할 수 있고, create 명령은 여러 개를 생성할 수 있으나 파일의 변경 사항을 바로 적용할 수 없습니다. (동적으로 변경 불가)
이런 경우를 위해 쿠버네티스는 `apply`라는 명령어를 제공합니다.

## 3.2.6 파드의 컨테이너 자동 복구 방법

쿠버네티스느 거의 모든 부분이 자동 복구되도록 설계됐습니다.  
특히 파드의 자동 복구 기술을 `셀프 힐링(Self-Healing)`이라고 하는데, 제대로 작동하지 않는 컨테이너를 다시 시작하거나 교체해 파드가 정상적으로 작동하게 합니다.
